<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>DailyLife Assistant</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --accent:#4a90e2;
      --bg:#f5f7fa;
      --container:#ffffff;
      --assistant-bg:#e9f0ff;
      --user-bg:#dff7df;
      --border:#e6e9ef;
      --text:#213547;
    }

    body{
      font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background:var(--bg);
      margin:0;
      height:100vh;
      display:flex;
      flex-direction:column;
    }

    .chat-container{
      flex:1;
      max-width:950px;
      width:95%;
      margin:28px auto;
      background:var(--container);
      border-radius:12px;
      box-shadow:0 6px 20px rgba(0,0,0,0.06);
      overflow:hidden;
      border:1px solid var(--border);
      display:flex;
      flex-direction:column;
    }

    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 18px;
      background:var(--accent);
      color:white;
      font-weight:700;
      gap:8px;
      border-top-left-radius:12px;
      border-top-right-radius:12px;
    }
    .meta-left{display:flex;align-items:center;gap:10px}
    .meta-buttons{display:flex;gap:8px;align-items:center}
    .btn{background:#fff;color:var(--accent);border:none;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    .btn.small{padding:6px 10px;font-size:14px;border-radius:999px}

    .messages{
      flex:1;
      padding:18px;
      overflow:auto;
      background:linear-gradient(180deg,#f9f9fb,#fff);
    }

    .message{
      margin-bottom:14px;
      display:flex;
      width:100%;
    }
    .msg-user{ justify-content:flex-end; }
    .msg-assistant{ justify-content:flex-start; }

    .bubble-user, .bubble-assistant {
      padding:12px 16px;
      border-radius:14px;
      max-width:75%;
      line-height:1.5;
      word-wrap:break-word;
      overflow-wrap:anywhere;
      font-size:15px;
      display:inline-block;
      white-space:normal;
      box-sizing:border-box;
    }

    .bubble-assistant {
      background: var(--assistant-bg);
      color: var(--text);
      border-top-left-radius:2px;
      box-shadow: 0 2px 6px rgba(74,144,226,0.08);
    }

    .bubble-user {
      background: var(--user-bg);
      color: var(--text);
      border-top-right-radius:2px;
      box-shadow: 0 2px 6px rgba(0,128,0,0.06);
    }

    /* md-content wrapper for HTML inserted from Markdown (tables, lists etc) */
    .md-content {
      display:block;
      max-width:100%;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      padding-bottom:6px;
    }

    /* table styling inside bubble (keeps it tidy and responsive) */
    .md-content table {
      border-collapse:collapse;
      width:auto;         /* do not force full width; allow scrolling */
      max-width:100%;
      table-layout:auto;
      font-size:14px;
    }
    .md-content th, .md-content td {
      border:1px solid #e1e6f0;
      padding:8px 10px;
      text-align:left;
      vertical-align:top;
      word-break:break-word;
      overflow-wrap:anywhere;
      white-space:normal;
    }
    .md-content tr:nth-child(odd) td { background: rgba(0,0,0,0.01); }

    /* Typing animation bubble */
    .typing-bubble {
      background: var(--assistant-bg);
      color: var(--text);
      border-radius: 14px;
      padding: 10px 14px;
      display: inline-block;
      max-width: 35%;
      box-sizing: border-box;
      box-shadow: 0 2px 6px rgba(74,144,226,0.06);
    }

    .typing-dots {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 4px 6px;
    }
    .typing-dots span {
      display:inline-block;
      width:8px;
      height:8px;
      background:#6b7caa; /* subtle dot color */
      border-radius:50%;
      opacity:0.2;
      transform: translateY(0);
      animation: typing-dot 1s infinite ease-in-out;
    }
    .typing-dots span:nth-child(1){ animation-delay: 0s; }
    .typing-dots span:nth-child(2){ animation-delay: 0.12s; }
    .typing-dots span:nth-child(3){ animation-delay: 0.24s; }

    @keyframes typing-dot {
      0% { opacity: 0.2; transform: translateY(0); }
      50% { opacity: 1; transform: translateY(-5px); }
      100% { opacity: 0.2; transform: translateY(0); }
    }

    .input-area{
      display:flex;
      align-items:center;
      padding:12px;
      border-top:1px solid var(--border);
      background:#fafafa;
      gap:12px;
    }
    textarea{
      flex:1;
      padding:12px 14px;
      border:1px solid #e1e5ee;
      border-radius:10px;
      font-size:15px;
      min-height:44px;
      resize:none;
      outline:none;
    }
    .help-hint{font-size:13px;color:#666;padding-left:6px}

    /* Scrollbar styling */
    .messages::-webkit-scrollbar{ width:10px; }
    .messages::-webkit-scrollbar-track{ background:#f0f0f0; }
    .messages::-webkit-scrollbar-thumb{ background:#ccc;border-radius:6px; }
    .messages::-webkit-scrollbar-thumb:hover{ background:#aaa; }

    @media (max-width:600px){
      .bubble-user, .bubble-assistant { max-width:90%; font-size:14px; }
      .meta{padding:12px}
      .typing-bubble { max-width: 60%; }
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div class="meta">
      <div class="meta-left">
        <span style="font-size:18px">ðŸ’¬ DailyLife Assistant</span>
        <span style="margin-left:8px;font-weight:400;font-size:13px;opacity:0.9">â€” Type a question, press Send</span>
      </div>

      <div class="meta-buttons">
        <button id="helpBtn" class="btn small">Help</button>
        <button id="clearBtn" class="btn small">Clear Chat</button>
        <button id="exitBtn" class="btn small">Exit</button>
      </div>
    </div>

    <div id="messages" class="messages" aria-live="polite" aria-atomic="false"></div>

    <div class="input-area">
      <textarea id="input" rows="1" placeholder="Ask me something..."></textarea>
      <button id="send" class="btn">Send</button>
      <div class="help-hint">Tip: press Enter to send â€¢ <a id="quickHelp" href="#" style="color:var(--accent);text-decoration:none">shortcuts</a></div>
    </div>
  </div>

  <!-- markdown parser + sanitizer -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify/dist/purify.min.js"></script>

  <script src="/static/chat.js"></script>
</body>
</html>
